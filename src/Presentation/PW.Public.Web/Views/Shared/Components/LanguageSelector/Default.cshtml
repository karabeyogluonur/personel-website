@model LanguageSelectorViewModel

@{
    var returnUrl = Context.Request.Path + Context.Request.QueryString;
}

@if (Model.CurrentLanguage != null)
{
    <div class="">
        <button class="btn btn-flex btn-link btn-color-gray-700 btn-active-color-primary rotate fs-base"
            data-kt-menu-trigger="click" data-kt-menu-placement="bottom-start" data-kt-menu-offset="0px, 0px">
            <img class="w-20px h-20px rounded" file-name="@Model.CurrentLanguage.FlagImageFileName"
                folder="@StoragePaths.System_Flags" alt="@Model.CurrentLanguage.Name" />
        </button>
        <div class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-800 menu-state-bg-light-primary fw-semibold w-200px py-4 fs-7"
            data-kt-menu="true" id="kt_auth_lang_menu">

            @foreach (var lang in Model.AvailableLanguages)
            {
                <div class="menu-item px-3">
                    <a asp-controller="Common" asp-action="ChangeLanguage" asp-route-culture="@lang.Code"
                        asp-route-returnUrl="@returnUrl"
                        class="menu-link d-flex px-5 @(lang.Code == Model.CurrentLanguage.Code ? "active" : "")"
                        data-kt-lang="@lang.Name">

                        <span class="symbol symbol-20px me-4">
                            <img class="rounded-1" file-name="@lang.FlagImageFileName" folder="@StoragePaths.System_Flags"
                                alt="@lang.Name" />
                        </span>

                        <span data-kt-element="lang-name">@lang.Name</span>
                    </a>
                </div>
            }

        </div>
    </div>
}
